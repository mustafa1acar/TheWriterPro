"use strict";(self.webpackChunkwriterpro=self.webpackChunkwriterpro||[]).push([[257],{1246:e=>{const t=e=>new Promise((t,o)=>{const a=new FileReader;a.onload=()=>{t(a.result)},a.onerror=e=>{let{target:{error:{code:t}}}=e;o(Error(`File could not be read! Code=${t}`))},a.readAsArrayBuffer(e)}),o=async e=>{let a=e;if("undefined"===typeof e)return"undefined";if("string"===typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))a=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{const t=await fetch(e);a=await t.arrayBuffer()}else if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(a=await o(e.src)),"VIDEO"===e.tagName&&(a=await o(e.poster)),"CANVAS"===e.tagName&&await new Promise(o=>{e.toBlob(async e=>{a=await t(e),o()})});else if("undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const o=await e.convertToBlob();a=await t(o)}else(e instanceof File||e instanceof Blob)&&(a=await t(e));return new Uint8Array(a)};e.exports=o},1257:(e,t,o)=>{const a=o(1432),r=o(9343),n=o(2163),i=o(7092),s=o(1600),l=o(5783),{setLogging:d}=o(5597);e.exports={languages:i,OEM:s,PSM:l,createScheduler:a,createWorker:r,setLogging:d,...n}},1432:function(e,t,o){const a=o(5362),{log:r}=o(5597),n=o(1674);let i=0;e.exports=()=>{const e=n("Scheduler",i),t={},o={};let s=[];i+=1;const l=()=>Object.keys(t).length,d=()=>{if(0!==s.length){const e=Object.keys(t);for(let a=0;a<e.length;a+=1)if("undefined"===typeof o[e[a]]){s[0](t[e[a]]);break}}},c=(t,n)=>new Promise((i,l)=>{const c=a({action:t,payload:n});s.push(async e=>{s.shift(),o[e.id]=c;try{i(await e[t].apply(this,[...n,c.id]))}catch(a){l(a)}finally{delete o[e.id],d()}}),r(`[${e}]: Add ${c.id} to JobQueue`),r(`[${e}]: JobQueue length=${s.length}`),d()});return{addWorker:o=>(t[o.id]=o,r(`[${e}]: Add ${o.id}`),r(`[${e}]: Number of workers=${l()}`),d(),o.id),addJob:async function(t){if(0===l())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);for(var o=arguments.length,a=new Array(o>1?o-1:0),r=1;r<o;r++)a[r-1]=arguments[r];return c(t,a)},terminate:async()=>{Object.keys(t).forEach(async e=>{await t[e].terminate()}),s=[]},getQueueLen:()=>s.length,getNumWorkers:l}}},1600:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},1674:e=>{e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},1734:e=>{e.exports=e=>{const t={};return"undefined"!==typeof WorkerGlobalScope?t.type="webworker":"object"===typeof document?t.type="browser":"object"===typeof process&&(t.type="node"),"undefined"===typeof e?t:t[e]}},2163:(e,t,o)=>{const a=o(9343);e.exports={recognize:async(e,t,o)=>{const r=await a(t,1,o);return r.recognize(e).finally(async()=>{await r.terminate()})},detect:async(e,t)=>{const o=await a("osd",0,t);return o.detect(e).finally(async()=>{await o.terminate()})}}},3146:(e,t,o)=>{const a=o(6125).rE,r=o(6706);e.exports={...r,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${a}/dist/worker.min.js`}},3919:(e,t,o)=>{const a=o(3146),r=o(4282),n=o(4826),i=o(6171),s=o(6677),l=o(1246);e.exports={defaultOptions:a,spawnWorker:r,terminateWorker:n,onMessage:i,send:s,loadImage:l}},4282:e=>{e.exports=e=>{let t,{workerPath:o,workerBlobURL:a}=e;if(Blob&&URL&&a){const e=new Blob([`importScripts("${o}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(o);return t}},4826:e=>{e.exports=e=>{e.terminate()}},5362:(e,t,o)=>{const a=o(1674);let r=0;e.exports=e=>{let{id:t,action:o,payload:n={}}=e,i=t;return"undefined"===typeof i&&(i=a("Job",r),r+=1),{id:i,action:o,payload:n}}},5597:function(e,t){var o=this;let a=!1;t.logging=a,t.setLogging=e=>{a=e},t.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a?console.log.apply(o,t):null}},5783:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},6125:e=>{e.exports={rE:"6.0.1"}},6171:e=>{e.exports=(e,t)=>{e.onmessage=e=>{let{data:o}=e;t(o)}}},6677:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},6706:e=>{e.exports={workerBlobURL:!0,logger:()=>{}}},7092:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},9343:(e,t,o)=>{const a=o(9980),r=o(5362),{log:n}=o(5597),i=o(1674),s=o(1600),{defaultOptions:l,spawnWorker:d,terminateWorker:c,onMessage:g,loadImage:p,send:u}=o(3919);let h=0;e.exports=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.LSTM_ONLY,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const y=i("Worker",h),{logger:L,errorHandler:w,...m}=a({...l,...o}),S={},A="string"===typeof e?e.split("+"):e;let E=t,T=f;const k=[s.DEFAULT,s.LSTM_ONLY].includes(t)&&!m.legacyCore;let O,R;const b=new Promise((e,t)=>{R=e,O=t});let N=d(m);N.onerror=e=>{O(e.message)},h+=1;const _=e=>{let{id:t,action:o,payload:a}=e;return new Promise((e,r)=>{n(`[${y}]: Start ${t}, action=${o}`);S[`${o}-${t}`]={resolve:e,reject:r},u(N,{workerId:y,jobId:t,action:o,payload:a})})},I=(e,t)=>_(r({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[s.DEFAULT,s.LSTM_ONLY].includes(E)&&!m.legacyLang}}})),v=(e,t,o,a)=>_(r({id:a,action:"initialize",payload:{langs:e,oem:t,config:o}}));g(N,e=>{let{workerId:t,jobId:o,status:a,action:r,data:i}=e;const s=`${r}-${o}`;if("resolve"===a)n(`[${t}]: Complete ${o}`),S[s].resolve({jobId:o,data:i}),delete S[s];else if("reject"===a){if(S[s].reject(i),delete S[s],"load"===r&&O(i),!w)throw Error(i);w(i)}else"progress"===a&&L({...i,userJobId:o})});const P={id:y,worker:N,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,o)=>_(r({id:o,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>_(r({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>_(r({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,o)=>_(r({id:o,action:"FS",payload:{method:e,args:t}})),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(k&&[s.TESSERACT_ONLY,s.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const r=t||E;E=r;const n=o||T;T=n;const i=("string"===typeof e?e.split("+"):e).filter(e=>!A.includes(e));return A.push(...i),i.length>0?I(i,a).then(()=>v(e,r,n,a)):v(e,r,n,a)},setParameters:function(){return _(r({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},recognize:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{text:!0};return _(r({id:arguments.length>3?arguments[3]:void 0,action:"recognize",payload:{image:await p(e),options:t,output:o}}))},detect:async(e,t)=>{if(k)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _(r({id:t,action:"detect",payload:{image:await p(e)}}))},terminate:async()=>(null!==N&&(c(N),N=null),Promise.resolve())};var M;return _(r({id:M,action:"load",payload:{options:{lstmOnly:k,corePath:m.corePath,logging:m.logging}}})).then(()=>I(e)).then(()=>v(e,t,f)).then(()=>R(P)).catch(()=>{}),b}},9980:(e,t,o)=>{const a="browser"===o(1734)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(o=>{e[o]&&(t[o]=a(t[o]))}),t}}}]);
//# sourceMappingURL=257.2adbfdcb.chunk.js.map